{# templates/admin/users/edit.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Administration - Modifier un utilisateur{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="mb-4">Modifier l'utilisateur : {{ user.Pseudo }}</h1>

        {% if app.flashes('error') %}
            <div class="alert alert-danger">
                {{ app.flashes('error')[0] }}
            </div>
        {% endif %}

        <form method="post" action="{{ path('admin_user_edit', {'id': user.id}) }}">
            <div class="form-group">
                <label for="pseudo">Pseudo :</label>
                <input type="text" id="pseudo" name="pseudo" class="form-control" value="{{ user.Pseudo }}" required>
            </div>

            <div class="form-group">
                <label for="email">Adresse Email :</label>
                <input type="email" id="email" name="email" class="form-control" value="{{ user.Email }}" required>
            </div>

            <div class="form-group">
                <label>Rôles :</label>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="roles[]" value="ROLE_USER" id="role-user" {% if 'ROLE_USER' in user.getRoles() %}checked{% endif %}>
                    <label class="form-check-label" for="role-user">
                        Utilisateur
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="roles[]" value="ROLE_PREMIUM" id="role-premium" {% if 'ROLE_PREMIUM' in user.getRoles() %}checked{% endif %}>
                    <label class="form-check-label" for="role-admin">
                        Premium (Payant repére)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="roles[]" value="ROLE_MODO" id="role-modo" {% if 'ROLE_MODO' in user.getRoles() %}checked{% endif %}>
                    <label class="form-check-label" for="role-admin">
                        Modérateur
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="roles[]" value="ROLE_ADMIN" id="role-admin" {% if 'ROLE_ADMIN' in user.getRoles() %}checked{% endif %}>
                    <label class="form-check-label" for="role-admin">
                        Administrateur
                    </label>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">
                Mettre à jour le profil
            </button>
        </form>

        <a href="{{ path('admin_users') }}" class="btn btn-secondary mt-3">
            Retour à la liste des utilisateurs
        </a>
    </div>
{% endblock %}
